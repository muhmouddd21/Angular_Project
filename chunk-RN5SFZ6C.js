import{a as P,b as m,c as S,d as y,g as O,j as k,k as E,r as I,t as L}from"./chunk-KWJHN24A.js";import{b as w}from"./chunk-5GY5W4OM.js";import{c as x,d as C,j as M}from"./chunk-SLN674KU.js";import{Ja as p,La as l,Ma as f,Oa as o,Pa as i,Qa as g,Ua as h,Va as u,Xa as a,Za as _,_ as b,db as v,va as r,wa as c}from"./chunk-RI2LG5KK.js";function F(t,d){t&1&&(o(0,"span"),a(1,"Email is required"),i())}function N(t,d){t&1&&(o(0,"span"),a(1,"Please enter a valid email"),i())}function A(t,d){if(t&1&&(o(0,"div",16),p(1,F,2,0,"span",17)(2,N,2,0,"span",17),i()),t&2){let n=u();r(),l("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.required),r(),l("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.email)}}function D(t,d){t&1&&(o(0,"span"),a(1,"Password is required"),i())}function z(t,d){t&1&&(o(0,"span"),a(1,"Password must be at least 6 characters"),i())}function R(t,d){if(t&1&&(o(0,"div",16),p(1,D,2,0,"span",17)(2,z,2,0,"span",17),i()),t&2){let n=u();r(),l("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.required),r(),l("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.minlength)}}function q(t,d){if(t&1&&(o(0,"div",18),a(1),i()),t&2){let n=u();r(),_(" ",n.errorMessage," ")}}function G(t,d){t&1&&g(0,"span",19)}var J=(()=>{class t{constructor(n,s,e){this.fb=n,this.authService=s,this.router=e,this.isLoading=!1,this.errorMessage="",this.loginForm=this.fb.group({email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]]})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}onSubmit(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";let{email:n,password:s}=this.loginForm.value;this.authService.signIn(n,s).subscribe({next:e=>{this.isLoading=!1,this.authService.login(),this.authService.idtoken=e.idToken,this.authService.email=e.email,this.authService.Uid=e.localId,this.router.navigate(["/home"])},error:e=>{console.error("Login error:",e),this.isLoading=!1,this.handleError(e)}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(n=>{this.loginForm.get(n)?.markAsTouched()})}handleError(n){if(n.error&&n.error.error)switch(n.error.error.message){case"EMAIL_NOT_FOUND":this.errorMessage="No account found with this email address.";break;case"INVALID_PASSWORD":this.errorMessage="Incorrect password.";break;case"USER_DISABLED":this.errorMessage="This account has been disabled.";break;case"TOO_MANY_ATTEMPTS_TRY_LATER":this.errorMessage="Too many failed attempts. Please try again later.";break;default:this.errorMessage="Login failed. Please try again."}else this.errorMessage="Network error. Please check your connection and try again."}navigateToRegister(){this.router.navigate(["/register"])}static{this.\u0275fac=function(s){return new(s||t)(c(I),c(w),c(M))}}static{this.\u0275cmp=b({type:t,selectors:[["app-login"]],standalone:!0,features:[v],decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],["class","error-message global-error",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],["class","spinner",4,"ngIf"],[1,"login-footer"],[1,"signup-link"],["type","button",1,"link-button",3,"click"],[1,"error-message"],[4,"ngIf"],[1,"error-message","global-error"],[1,"spinner"]],template:function(s,e){s&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),a(4,"Welcome Back"),i(),o(5,"p"),a(6,"Please sign in to your account"),i()(),o(7,"form",3),h("ngSubmit",function(){return e.onSubmit()}),o(8,"div",4)(9,"label",5),a(10,"Email Address"),i(),g(11,"input",6),p(12,A,3,2,"div",7),i(),o(13,"div",4)(14,"label",8),a(15,"Password"),i(),g(16,"input",9),p(17,R,3,2,"div",7),i(),p(18,q,2,1,"div",10),o(19,"button",11),p(20,G,1,0,"span",12),a(21),i()(),o(22,"div",13)(23,"div",14),a(24," Don't have an account? "),o(25,"button",15),h("click",function(){return e.navigateToRegister()}),a(26," Sign up here "),i()()()()()),s&2&&(r(7),l("formGroup",e.loginForm),r(4),f("error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),r(),l("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),r(4),f("error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),r(),l("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),r(),l("ngIf",e.errorMessage),r(),l("disabled",e.isLoading),r(),l("ngIf",e.isLoading),r(),_(" ",e.isLoading?"Signing in...":"Sign In"," "))},dependencies:[L,O,P,S,y,k,E,C,x],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 15px 35px #0000001a;padding:40px;width:100%;max-width:400px;animation:_ngcontent-%COMP%_slideUp .5s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:28px;font-weight:600;margin:0 0 8px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#333;font-weight:500;font-size:14px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e5e9;border-radius:8px;font-size:16px;transition:all .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.error[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;margin-top:5px;display:block}.global-error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:12px;border-radius:6px;border:1px solid #f5c6cb;margin-bottom:20px;text-align:center}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.link-button[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;text-decoration:underline;cursor:pointer;font-size:14px;padding:0;transition:color .3s ease}.link-button[_ngcontent-%COMP%]:hover{color:#764ba2}.signup-link[_ngcontent-%COMP%]{margin-top:15px;color:#666;font-size:14px}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.login-card[_ngcontent-%COMP%]{padding:30px 20px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}"]})}}return t})();export{J as LoginComponent};
